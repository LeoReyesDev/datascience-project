<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>Mapa</title>
   <script src="dataMap.js"></script>
   <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
  integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
  crossorigin=""/>
   <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
  integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
  crossorigin="">
  </script>
  <style>
     #mapid { width:100%; height: 900px; }
     p{
      color:gray;
      font-size: 16px;
      text-align: center;
     }
     h1{
      color:black;
      font-size: 25px;
      text-align: center;
      text-decoration: underline;
     }
     h2{
      color:red;
      font-weight: bold;
      text-align: center;
     }
     h3{
      color:red;
      font-weight: bold;
      text-align: center;
      font-size: 20px;
     }
  </style>
</head>
<body>

   <div id="mapid">

   </div>
   <script>

      var mymap = L.map('mapid').setView([41.881832,  -87.623177], 12)
      L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}',
      { attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
          maxZoom: 18,
          id: 'mapbox.streets',
          accessToken: 'pk.eyJ1IjoibGVvcmV5ZXNkZXYiLCJhIjoiY2pmb205OXh6MW83eDJ4cW90d28yb2E2eSJ9.HVLXLsI5yWoQNmBlFwYcTQ'
      }).addTo(mymap);

      var coords = []
      var dataRestaurant = []

      obj.map((restaurant,i) => {

         var dateInspection = new Date(restaurant.inspection_date)

         coords.push([restaurant.latitude,restaurant.longitude])

         dataRestaurant.push(
            ["<h1>"+restaurant.dba_name+"</h1>"+"<p>"+
               "ADDRESS: "+restaurant.address+"</p>" +"<h2>"+
               "TYPE OF RISK: "+restaurant.risk+"<h2/>"+"<p>"+
               "INSPECTION DATE: "+dateInspection+"</p>"+"<h3>"+
               restaurant.results+"</h3>"]
         )

      })

      console.log("Coordenates",coords)
      console.log("DATA REST",dataRestaurant)

      var myMark = 0

       for(var i=0; i<coords.length; i++){
         //console.log('Marker',marker,"Cooords",coords[marker])
         L.marker(coords[i]).addTo(mymap)
            .bindPopup("<br/>"+dataRestaurant[i]+"").openPopup();
            var popup = L.popup();
       }
   </script>
</body>
</html>




